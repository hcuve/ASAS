---
title: "Scoring_questionnaires2021"
author: "Helio"
date: "21/08/2021"
output: html_document
---

AQ_50

```{r}
# Traditional scoring

setwd("~/OneDrive - Nexus365/InteroStudy2020/analysis/DataAnalysisJanuary2020/DataAnalysisJan2020/selfreport/Short format/data_exp_11458-v9 (2)/Select")

library(readr)

db_quest_checkAQ<- read_csv("data_exp_11458-v8_questionnaire-7uqw.csv")
View(db_quest_checkAQ)

library(tidyverse)
colnames(db_quest_checkAQ)

db_quest_checkAQ<- db_quest_checkAQ%>%
  select(c(16,31:130))
  
db_quest_checkAQ_1<- db_quest_checkAQ%>%
select(seq(1, 101, 2))



# create a prefix for AQ items
# https://it.unt.edu/sites/default/files/paste_jds_jun2013.pdf - some nice tips here
prefix<- "AQ_"

AQ_counter<- seq(1,50)


aq_labels<-paste(prefix, AQ_counter, sep = "")
# generate odd numbers to match the columns we wnt to keep
names<- c("completion_code", aq_labels)

# rename dataset
names(db_quest_checkAQ_1)<- names

db_quest_checkAQ_2<- db_quest_checkAQ_1 %>%
#   mutate_at(c('TAS_4', 'TAS_5', 'TAS_10', 'TAS_18', 'TAS_19'), 
#             funs(recode(., "1=5; 2=4; 3=3; 4=2; 5 =1")))%>%
# #    2, 4, 5, 6, 7, 9, 12, 13, 16, 18,
# # 19, 20, 21, 22, 23, 26, 33, 35, 39, 41, 42, 43, 45, 46
  mutate_at(c("AQ_2", "AQ_4", "AQ_5", "AQ_6", "AQ_7", "AQ_9", "AQ_12", "AQ_13", "AQ_16", "AQ_18",
                 "AQ_19","AQ_20", "AQ_21", "AQ_22", "AQ_23", "AQ_26", "AQ_33", "AQ_35", "AQ_39", "AQ_41",
                 "AQ_42",
                 "AQ_43", "AQ_45", "AQ_46"), 
            funs(ifelse(. <= 2, 1, 0)))%>%
            # funs(recode(., "1=1; 2=1; 3=0; 4=0")))%>%
   mutate_at(c("AQ_1", "AQ_3", "AQ_8", "AQ_10", "AQ_11", "AQ_14", "AQ_15", "AQ_17", "AQ_24", "AQ_25",
                 "AQ_27","AQ_28", "AQ_29", "AQ_30", "AQ_31", "AQ_32", "AQ_34", "AQ_36", "AQ_37", "AQ_38",
                 "AQ_40",
                 "AQ_44", "AQ_47", "AQ_48", "AQ_49", "AQ_50"), 
             funs(ifelse(. > 2, 1, 0)))
             # funs(recode(., "1=0; 2=0; 3=1; 4=1")))



db_quest_checkAQ_2%>%
  # mutate(DIF = TAS_1 + TAS_3 + TAS_6 + TAS_7 + TAS_9 + TAS_13+ TAS_14)%>%
  # mutate(EOT = TAS_8+TAS_15+TAS_16+TAS_20+TAS_5+TAS_10+TAS_18+TAS_19)%>%
  # mutate(DDF = TAS_2+TAS_11+TAS_12+TAS_17+TAS_4)%>%
  mutate(SS = AQ_1+ AQ_11+ AQ_13 + AQ_15+ AQ_22 + AQ_36 + AQ_44 + AQ_45 + AQ_47 + AQ_48)%>%
  mutate(AS = AQ_2+ AQ_4 + AQ_10+AQ_16+AQ_25+AQ_32+AQ_34+AQ_37+AQ_43+AQ_46)%>%
  mutate(ATD = AQ_5+AQ_6+AQ_9+AQ_12+AQ_19+ AQ_23+AQ_28+AQ_29+AQ_30+AQ_49)%>%
  mutate(COM = AQ_7+AQ_17+AQ_18+AQ_26+AQ_27+AQ_31+AQ_33+AQ_35+AQ_38+AQ_39)%>%
  mutate(IMAG = AQ_3+AQ_8+AQ_14+AQ_20+AQ_21+ AQ_24+AQ_40+AQ_41+AQ_42+AQ_50)%>%
  # mutate(TAS_Total = DIF + DDF + EOT)%>%
  mutate(AQ_Total = SS + AS +ATD + COM + IMAG)%>%
  select(c(completion_code, AQ_Total))
  ggplot(aes(TAS_Total, AQ_Total))+
  geom_point()+
  facet_grid(~Dataset)
  
```

this confirms that Lucys scoring is correct